<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8"/>

  <style>
    body {
      margin: 0;
    }
  </style>

  <!--<script src="node_modules/3d-force-graph/dist/3d-force-graph.js"></script>-->
  <script src="//unpkg.com/force-graph"></script>
  <!--<script src="../../dist/force-graph.js"></script>-->
</head>

<body>


<div id="graph"></div>

<script>


  // Random tree
  const N = 300;

  /* /////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Data
    Maker nodes = 3970
    Maker edges =



  //////////////////////////////////////////////////////////////////////////////////////////////////////////////*/


  const gData = {


    nodes: [

      {"id": "0", "group": "1", "label": "Maker TUB", "first_date": "Dec 2017"},

      {"id": "1", "group": "2", "label": "Maker Proxy_1", "first_date": "Dec 2017"},
      {"id": "5", "group": "3", "label": "EOA", "first_date": "Dec 2017"},
      {"id": "9", "group": "3", "label": "EOA", "first_date": "Feb 2018"},

      {"id": "2", "group": "2", "label": "Maker Proxy_2", "first_date": "Mar 2018"},
      {"id": "6", "group": "3", "label": "EOA", "first_date": "Mar 2018"},
      {"id": "10", "group": "3", "label": "EOA", "first_date": "Apr 2018"},

      {"id": "3", "group": "2", "label": "Maker Proxy_3", "first_date": "May 2018"},
      {"id": "7", "group": "3", "label": "EOA", "first_date": "May 2018"},
      {"id": "11", "group": "3", "label": "EOA", "first_date": "Jun 2018"},

      {"id": "13", "group": "4", "label": "Wrapped Ether (WETH)", "first_date": "Dec 2018"},

      {"id": "4", "group": "5", "label": "Augur", "first_date": "Jul 2018"},
      {"id": "8", "group": "3", "label": "EOA", "first_date": "Jul 2018"},
      {"id": "12", "group": "3", "label": "EOA", "first_date": "Aug 2018"},

      {"id": "14", "group": "6", "label": "Compound", "first_date": "Jul 2018"},
      {"id": "15", "group": "3", "label": "EOA", "first_date": "Jul 2018"},
      {"id": "16", "group": "3", "label": "EOA", "first_date": "Aug 2018"},

      {"id": "17", "group": "7", "label": "DxDY", "first_date": "Sep 2018"},
      {"id": "18", "group": "3", "label": "EOA", "first_date": "Sep 2018"},
      {"id": "19", "group": "3", "label": "EOA", "first_date": "Oct 2018"},

      {"id": "20", "group": "8", "label": "Uniswap", "first_date": "Nov 2018"},
      {"id": "21", "group": "3", "label": "EOA", "first_date": "Nov 2018"},
      {"id": "22", "group": "3", "label": "EOA", "first_date": "Jan 2019"}


    ],


    links: [

      {"source": "1", "target": "0", "id": "1a", "date": "Dec 2017", "value": 1394.46},
      {"source": "5", "target": "1", "id": "1aa", "date": "Dec 2017", "value": 1394.46},
      {"source": "1", "target": "13", "id": "1aaa", "date": "Dec 2017", "value": 1394.46},

      {"source": "1", "target": "0", "id": "1b", "date": "Feb 2018", "value": 1436.51},
      {"source": "9", "target": "1", "id": "1bb", "date": "Feb 2018", "value": 1436.51},
      {"source": "1", "target": "13", "id": "1bbb", "date": "Feb 2018", "value": 1436.51},

      {"source": "2", "target": "0", "id": "2a", "date": "Mar 2018", "value": 1366.42},
      {"source": "6", "target": "2", "id": "2aa", "date": "Mar 2018", "value": 1366.42},
      {"source": "2", "target": "13", "id": "2aaa", "date": "Mar 2018", "value": 1366.42},

      {"source": "2", "target": "0", "id": "2b", "date": "Apr 2018", "value": 1429.4},
      {"source": "10", "target": "2", "id": "2bb", "date": "Apr 2018", "value": 1429.4},
      {"source": "2", "target": "13", "id": "2bbb", "date": "Apr 2018", "value": 1429.4},

      {"source": "3", "target": "0", "id": "3", "date": "May 2018", "value": 1498.58},
      {"source": "7", "target": "3", "id": "3a", "date": "May 2018", "value": 1430.83},
      {"source": "3", "target": "13", "id": "3aa", "date": "May 2018", "value": 1430.83},

      {"source": "3", "target": "0", "id": "3b", "date": "Jun 2018", "value": 1498.58},
      {"source": "11", "target": "3", "id": "3b", "date": "Jun 2018", "value": 1430.83},
      {"source": "3", "target": "13", "id": "3bb", "date": "Jun 2018", "value": 1430.83},


      {"source": "8", "target": "4", "id": "4a", "date": "Jul 2018", "value": 1517.68},
      {"source": "4", "target": "13", "id": "4aa", "date": "Jul 2018", "value": 1517.68},

      {"source": "12", "target": "4", "id": "4a", "date": "Aug 2018", "value": 1517.68},
      {"source": "4", "target": "13", "id": "4aa", "date": "Aug 2018", "value": 1517.68},


      {"source": "15", "target": "14", "id": "5a", "date": "Jul 2018", "value": 1517.68},
      {"source": "14", "target": "13", "id": "5aa", "date": "Jul 2018", "value": 1517.68},

      {"source": "16", "target": "14", "id": "5b", "date": "Aug 2018", "value": 1517.68},
      {"source": "14", "target": "13", "id": "5bb", "date": "Aug 2018", "value": 1517.68},


      {"source": "18", "target": "17", "id": "6a", "date": "Sep 2018", "value": 1320.28},
      {"source": "17", "target": "13", "id": "6aa", "date": "Sep 2018", "value": 1320.28},

      {"source": "19", "target": "17", "id": "6b", "date": "Oct 2018", "value": 1320.28},
      {"source": "17", "target": "13", "id": "6bb", "date": "Oct 2018", "value": 1320.28},


      {"source": "21", "target": "20", "id": "7a", "date": "Nov 2018", "value": 1320.28},
      {"source": "20", "target": "13", "id": "7aa", "date": "Nov 2018", "value": 1320.28},

      {"source": "22", "target": "20", "id": "7b", "date": "Jan 2019", "value": 1320.28},
      {"source": "20", "target": "13", "id": "7bb", "date": "Jan 2019", "value": 1320.28}


    ]
  };


  const Graph = ForceGraph()
    (document.getElementById('graph'))
      .linkDirectionalParticles(2)
      .graphData(gData)
      .backgroundColor('#dddddd')
      .nodeCanvasObject((node, ctx, globalScale) => {
        const label = node.label;
        const fontSize = 12 / globalScale;
        ctx.font = `${fontSize}px Sans-Serif`;
        const textWidth = ctx.measureText(label).width;
        const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.2); // some padding
        ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
        ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = '#333';
        ctx.fillText(label, node.x, node.y);
      })
      .linkDirectionalParticleSpeed(0.01) // this is the default


  ;


  console.log();


</script>
</body>
</html>